{% extends "base.twig" %}
{% block content %}
<div class="container">
    <div class="d-flex justify-content-between mb-2">
        <h2>Liste des tâches</h2>
        <a class="text-dark text-decoration-none" href="/personnalWebsites/todo_list/public/task/new/"><button class="btn btnnewtask" type="button">New Task</button></a>
    </div>
            {% for task in tasks %}
                <div class="card myblueborder m-2 cardhover">
                    <div class="d-flex justify-content-between m-2">
                        <div class=" d-flex col-7">
                            <h3>{{ task.title }}</h3>

                        </div>
                        <div class="col-2">
                            <span class="badge bpstatus">
                                        <p class="">{{ task.status }}</p>
                            </span>
                        </div>
                        <div class="d-flex col-3">
                                <a class="text-dark text-decoration-none" href="/personnalWebsites/todo_list/public/task/{{ task.id }}" ><button class="btn btnshow" type="button">Show</button></a>
                                <a class="text-dark text-decoration-none px-2" href="/personnalWebsites/todo_list/public/task/{{ task.id }}/update" ><button class="btn btnupdate" type="button">Update</button></a>
                                <a class="text-dark text-decoration-none" href="javascript:deleteTask({{task.id}})" ><button class="btn btndelete" type="button">Delete</button></a>
                        </div>
                    </div>
                </div>
                
            {% endfor %}
        <a class="d-flex justify-content-center mt-5 mb-3 text-decoration-none" href="/personnalWebsites/todo_list/public/"><button class="btn btnback" type="button">Back to HomePage</button></a>
</div>

 <script>
        function deleteTask(id) {
            console.log(id);
            // On affiche une fenetre de controle pour confirmer la suppression
            const question = window.confirm("Voulez-vous vraiment supprimer cette tâche" + id + "?");
            // On fait l'action de supprimer seulement si la fenetre de controle est confirmer
            if (question === true) {
                window.location.href = "http://localhost/personnalWebsites/todo_list/public/task/" + id +"/delete/";

            }
        }
    </script>
{% endblock %}

